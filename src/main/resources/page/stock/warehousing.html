<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>入库操作</title>
    <link rel="stylesheet" type="text/css" href="../../static/layui/css/layui.css" />
    <link rel="stylesheet" type="text/css" href="../../static/css/admin.css" />
    <link rel="stylesheet" type="text/css" href="../../layuiadmin/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="../../layuiadmin/style/admin.css"/>
    <script src="../../layuiadmin/layui/layui.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../static/js/common.js" type="text/javascript" charset="utf-8"></script>
    <!--vue-->
    <script src="../../vue/Vue.js"></script>
    <!--使用ajax 需要导入-->
    <script  src="../../vue/vue-resource.js"></script>
    <!--获取URL的参数-->
    <script  src="../../vue/paragram.js"></script>
    <!--axios插件-->
    <script src="../../vue/axios.min.js"></script>
    <!--JQuery-->
    <script src="../../vue/jQuery-2.2.2-min.js"></script>
    <style>
        #span01{
            font-size: 20px;
            font-weight: bold;
        }
        #warehousing-page{
            left: 32%;
            top: 70%;
            position: absolute;
        }
        table tr{
            height: 80px;
        }
    </style>
</head>
<body>
<div class="page-content-wrap">
    <div class="layui-form-item">
        <div class="layui-inline">
            <span style="width: 30px;height: 8px" id="span01">入库操作</span>
        </div>
    </div>
    <div class="layui-form" id="table-list">
        <table class="layui-table" lay-even lay-skin="nob">
            <colgroup>
                <col class="hidden-xs" width="100">
                <col class="hidden-xs" width="200">
                <col class="hidden-xs" width="300">
                <col class="hidden-xs" width="150">
                <col class="hidden-xs" width="150">
                <col class="hidden-xs" width="250">
            </colgroup>
            <thead>
            <tr>
                <th class="hidden-xs">供货单编号</th>
                <th class="hidden-xs">供货批次</th>
                <th class="hidden-xs">供货时间</th>
                <th class="hidden-xs">总价/元</th>
                <th class="hidden-xs">供货状态</th>
                <th class="hidden-xs">操作</th>
            </tr>
            </thead>
            <tbody>
            <tr v-for="supplyBatch in info">
                <td class="hidden-xs">{{supplyBatch.supplyOrderCode}}</td>
                <td class="hidden-xs">{{supplyBatch.supplyBatch}}</td>
                <td class="hidden-xs">{{supplyBatch.supplyTime}}</td>
                <td class="hidden-xs">{{supplyBatch.totalPrice}}</td>
                <td class="hidden-xs" v-if="supplyBatch.supplyRecord==0">已验收</td>
                <td class="hidden-xs" v-if="supplyBatch.supplyRecord==1">已入库</td>
                <td>
                    <div class="layui-inline">
                        <button class="layui-btn layui-btn-mini layui-btn-normal" data-id="1"><i class="layui-icon">&#xe642;</i>入库</button>
                        <button class="layui-btn layui-btn-mini layui-btn-normal go-btn" data-id="2" data-url="batchInfo.html"><i class="layui-icon">&#xe615;</i>查看库存批次</button>
                    </div>
                </td>
            </tr>
            <!--<tr>-->
                <!--<td class="hidden-xs">alkgjaklg</td>-->
                <!--<td class="hidden-xs">2019-01-17</td>-->
                <!--<td class="hidden-xs">20200105第1批</td>-->
                <!--<td class="hidden-xs">7896513</td>-->
                <!--<td class="hidden-xs">0</td>-->
                <!--<td>-->
                    <!--<div class="layui-inline">-->
                        <!--<button class="layui-btn layui-btn-mini layui-btn-normal" data-id="1"><i class="layui-icon">&#xe642;</i>入库</button>-->
                        <!--<button class="layui-btn layui-btn-mini layui-btn-normal go-btn" data-id="2" data-url="batchInfo.html"><i class="layui-icon">&#xe615;</i>查看库存批次</button>-->
                    <!--</div>-->
                <!--</td>-->
            <!--</tr>-->
            </tbody>
        </table>
        <div id="warehousing-page" style="text-align: center;"></div>
    </div>
</div>
<script>
    var vue = new Vue({
        el:"#table-list",
        data:{
            info:''
        },
        methods:{

        }
    });

    layui.use('laypage', function () {
        var laypage = layui.laypage;
        laypage.render({
            elem: 'warehousing-page'
            , count: totalCount
            , limit :5
            , groups:1
            , layout: ['count', 'prev', 'page', 'next', 'refresh', 'skip']
            , jump: function (obj, first) {
                //点击非第一页页码时的处理逻辑。比如这里调用了ajax方法，异步获取分页数据
                if (!first) {
                    pagination(obj.curr, obj.limit);//第二个参数不能用变量pageSize，因为当切换每页大小的时候会出问题
                }
            }
        });
    });

    var pageIndex = 1;
    var pageSize = 5;
    var totalCount = 0;
    pagination(pageIndex, pageSize);
    function pagination(pageIndex, pageSize) {
        //查询条件
        var param = {
            currPage: pageIndex,
            pageSize: pageSize,
            //其它查询条件可在下面添加
        };
        $.ajax({
            type: 'POST',
            url: '/findAllSupplyBatch',
            dataType: 'json',
            data: param,
            async: false,//这里设置为同步执行，目的是等数据加载完再调用layui分页组件，不然分页组件拿不到totalCount的值
            success: function (data) {
                vue.info = data.dataList;
                totalCount = data.totalCount;
            }
        });
    };
</script>
</body>
</html>